%section.player
  - in_channel ||= false

  %h1=in_channel ? "Player" : player.name
  %section.player-states
    = haml :player_state, locals: { state: player.state, in_player: true }
    = haml :player_load_state, locals: { load_state: player.load_state, in_player: true }
  %section.player-primary-markers
    = haml :player_marker, locals: { marker: player.marker(:position), in_player: true }
    = haml :player_marker, locals: { marker: player.marker(:duration), in_player: true }
  %section.player-secondary-markers
    = haml :player_marker, locals: { marker: player.marker(:cue), in_player: true }
    = haml :player_marker, locals: { marker: player.marker(:intro), in_player: true }
  - if player.load_state == :ok
    %p
      = surround "Playing ", "." do
        %strong= player.item.name

  - if in_channel
    %a.in{ href: url(player.url) } In
  - unless in_channel
    %a.out{ href: url(player.parent_url) } Out
